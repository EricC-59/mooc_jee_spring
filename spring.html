<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="Ressources pédagogiques pour le MOOC Java EE Spring prêt à l'emploi">
    <meta name="author" content="Guillaume Dufrêne, Lionel Seinturier">
    
    <link rel="stylesheet" href="bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="bootstrap/ie10-viewport-bug-workaround.css">
    <link rel="stylesheet" href="css/main.css">
    <link href="https://fonts.googleapis.com/css?family=Muli" rel="stylesheet">
  </head>
  <body>


<!-- Fixed navbar -->
 <nav class="navbar navbar-default navbar-fixed-top">
   <div class="container">
     <div class="navbar-header">
       <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
         <span class="sr-only">Toggle navigation</span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
         <span class="icon-bar"></span>
       </button>
       <a class="navbar-brand" href="index.html">Java EE Spring ////</a>
     </div>
     <div id="navbar" class="navbar-collapse collapse">
       <div class="nav navbar-nav subtitle hidden-xs">Prêt à l'emploi</div>
       <ul class="nav navbar-nav navbar-right">
         <li>
           <a href="index.html">Accueil</a>
         </li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
             Les outils <span class="caret"></span>
           </a>
           <ul class="dropdown-menu">
             <li><a href="git.html">Git</a></li>
             <li><a href="#">Curl / Postman</a></li>
             <li><a href="maven.html">Maven</a></li>
             <li><a href="#">Sqlite</a></li>
             <li><a href="#">H2 database</a></li>
           </ul>
         </li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                JEE <span class="caret"></span>
              </a>
              <ul class="dropdown-menu">
                <li><a href="java.html">Java</a></li>
                <li><a href="tomcat.html">Tomcat</a></li>
                <li><a href="servlet.html">Servlet / JSP</a></li>
                <li><a href="jstl.html">JSTL</a></li>
                <li><a href="jdbc.html">JDBC</a></li>
                <li><a href="jpa.html">JPA</a></li>
              </ul>
         </li><li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                 Spring <span class="caret"></span>
               </a>
               <ul class="dropdown-menu">
                 <li><a href="spring.html">Context - IoC</a></li>
                 <li><a href="spring-mvc.html">Web mvc</a></li>
                 <li><a href="#">Jstl taglib</a></li>
                 <li><a href="#">ORM</a></li>
                 <li><a href="#">Data</a></li>
               </ul>
          </li>
       </ul>
     </div><!--/.nav-collapse -->
   </div>
   <div class="clear"></div>
 </nav>


<div class="container"><!--
******************************************************************************
                         SPRING
******************************************************************************
-->


        <h2>
          <img src="https://spring.io/img/homepage/icon-spring-framework.svg" width="50" />
          <a name="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages"><span class="octicon octicon-link"></span></a>Spring</h2>


<p>
        <i>&laquo; The Spring Framework provides a comprehensive programming and configuration model <br/>
          for modern Java-based enterprise applications &raquo;</i>
</p>


<p>
          Comprenez que Spring est un "couteau suisse" pour faciliter la vie du développeur Java, spécialement si il développe pour Java EE (mais pas que).</p>

<p>
        Le coeur de Spring est un moteur d'injection de dépendances permettant l'inversion de contrôle (en anglais IoC pour Inversion of Control) du cycle de vie des objets. L'IoC permet, entre autre, de "repousser" le choix d'implémentation (ou d'instance) d'un objet inclus dans un autre.
</p>

<p>
          Prenons l'exemple d'un DAO JPA ou JDBC. Imaginons que le développeur de notre interface ne soit pas le même que celui qui réalise la couche de persistance (donc du DAO). Le développeur de l'interface ne connait pas la classe qui sera utilisée, et d'ailleurs il n'a pas envie de faire un <code>new xxxJPADao()</code>, ce qui "casserait" en parti l'abstraction que nous avons essayé de mettre en place. De l'autre coté, le développeur de notre DAO ne sait pas où et comment son implémentation JPA sera utilisée. Il ne peut pas faire <code>view.setDao( ... )</code>
</p>

<p>
        Heureusement il y a Spring. Dans l'interface, on demandera à l'injecteur de dépendances de trouver et d'affecter le DAO, de l'autre on déclarera l'implémentation JPA comme composant DAO à être utilisé. Le tout sera initialisé et affecté au lancement de l'application.
</p>

<p>
        Merci Martin, que ferions-nous sans toi. <br>
        <i> pour votre culture générale </i> : <a href="http://www.martinfowler.com/articles/injection.html">Inversion of Control Containers and the Dependency Injection pattern</a> 
</p>

<h2>L'injection de dépendances</h2>

<p>
  Le principe est de construire des objets, que l'on nommera "composant" et de les mettre à disposition des autres composants.<br/>
Un composant est une instance partagée du contexte Spring, selon le pattern "singleton" par défaut.<br>
Une annotation <code class="ann">@Component</code> permet de définir une classe Java comme un composant Spring. Dans ces objets il sera possible d'utiliser l'annotation <code class="ann">@Autowired</code> pour injecter automatiquement une instance présente dans le contexte et possédant un type compatible.<br/>
Si une injection ne peut pas être satisfaite, alors une erreur sera levée au démarrage du contexte spring.<br/>
Certaines injections pouvant être facultatives, vous pouvez mettre le paramètre "required=false" dans l'annotation Autowired.
</p>

<p>
  Il existe différentes implémentations de contexte Spring. Nous utiliserons généralement <code>AnnotationConfigApplicationContext</code> comme instance d'<code>ApplicationContext</code>. Cette implémentation permet de configurer un contexte Spring à l'aide des annotations que nous avons placées.<br>
  Spring peut rechercher tous les composants (ceux annotés) dans une partie du classpath : cela se configure à l'aide de l'annotation <code class="ann">@ComponentScan</code>.  Spring inspectera la liste des packages passés en paramètre pour constituer son contexte, à l'aide des composants qui y sont définis.<br>
</p>

<p>
  La lecture de la documentation de référence <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html">concernant les beans</a> et surtout <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-annotation-config">ce paragraphe</a> vous serons sans doute d'une aide précieuse.<br>
</p>

<p>
  L'intérêt de Spring est surtout de réaliser des scénarii d'injection lorsque les objets proviennent de librairies différentes, ou lorsque plusieurs implémentations d'une même classe peuvent être utilisées dans l'application.<br>
  L'inspection des composants du classpath peut se faire dans vos packages ou ceux définis dans une autre librairie (jar).
</p>

</p>
  Cela peut vite devenir complexe de comprendre ce qui se trouve ou non dans le contexte Spring. Il faudra veiller à bien structurer ses packages et la définition de ses composants pour s'y retrouver. Il peut être intéressant d'utiliser un contexte décrit en XML, ou de regrouper la création des objets du contexte dans un objet portant l'annotation <code class="ann">@Configuration</code>.
</p>

<p>
  Si généralement nous préférons mettre des annotations pour configurer un contexte Spring, il est effectivement possible
  d'utiliser des fichiers de configuration en XML. Historiquement, c'est la manière dont on configurait
  un contexte Spring. Les deux approches (annotations / XML) ont leurs avantages et inconvénients.
  <ul>
    <li>Avantage du XML : la configuration du contexte est indépendante du code Java, ce qui évite 
    de recompiler les classes lors d'un changement de contexte. On maitrise parfaitement ce que contient le contexte, tout étant déclaré.</li>
    <li>Inconvénient : le XML c'est assez pénible à lire, long à écrire, et à "manipuler" ...</li>
  </ul>
  Selon l'utilisation de votre librairie ou de votre application, il peut être intéressant de prévoir
  une configuration par annotation ou par fichier XML. Les deux approches peuvent aussi se mixer.
</p>





    <footer>
      <p>
        <img align="right" src="img/UL-2014.png" height="80"/>
        Projet réalisé par 
        <a href="https://github.com/gdufrene">
          Guillaume Dufrêne</a>, 
        <a href="http://www.lifl.fr/~seinturi/">
          Lionel Seinturier</a> 
        - Université de Lille
        <br/>
        Hosted on GitHub Pages &mdash; Theme by <a href="http://semm.univ-lille1.fr/">SEMM</a> / B.Dufrêne
      </p>
      <p>
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
          <img style="float: left, margin: 10px" alt="Licence Creative Commons" style="border-width:0" src="https://licensebuttons.net/l/by-nc-sa/4.0/88x31.png" />
        </a>
        Cette œuvre est mise à disposition selon les termes de la Licence :<br/>
        <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
          Creative Commons Attribution <br/>
          - Pas d’Utilisation Commerciale <br/>
          - Partage dans les Mêmes Conditions <br/>
          4.0 International</a>.
      </p>
    </footer>
    
</div> <!-- container -->

    <script src="bootstrap/jquery.min.js"></script>
    <script src="bootstrap/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="bootstrap/ie10-viewport-bug-workaround.js"></script>
    
  </body>
</html>
